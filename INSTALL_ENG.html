<HTML>
<HEAD>
<TITLE>Installation of LSD
</TITLE>
</HEAD>
<BODY>

<CENTER>
<H1>Installation of LSD from sources for Unix-like systems</H1>
</CENTER>

<P>
<I>Last modified : May, 10<SUP>th</SUP> 2020.</I>
</P>

<P>
Please read carefully before starting any installation !
</P>

<P>
Installation is known to work under Cygwin (PC/Windows, see below), GNU/Linux and MacOSX.
</P>

<P>
LSD is writtren in ANSI C and should be reasonably portable to
other systems.
</P>

<H1>Note to PC/Windows users</H1>

<H2>Cygwin as operating system.</H2>
<P>
LSD-3.4.11 was developed in a Unix environment.
However, PC/Windows users can use LSD
if they install cygwin. It provides a wide subset
of Unix functionalities.
Alternatively, you may use a binary distribution,
<A HREF="LSDos-3.4.11.zip">LSDos</A>, that is
LSD for MS-DOS.
A specific documentation is included.
</P>

<P>
You can find Cygwin at
<A HREF="http://www.cygwin.com">www.cygwin.com</A>.
</P>

<P>
Ghostview is needed to visualize the Postcript file that
contains the solutions generated by LSD.
It is possible to avoid using Ghostview by editing the "solve" file.
Ghostview can be downloaded from
<A HREF="http://www.cs.wisc.edu/~ghost">www.cs.wisc.edu/~ghost</A>.
Pre-installation of Ghostscript is required.
The latter can be downloaded from the same web site.
Installation of both tools should be achieved in the default
locations.
</P>

<P>
A fully detailed installation of Cygwin can be found at
<A HREF="http://www.gammon.com.au/smaug/installingcygwin.htm">
www.gammon.com.au/smaug/installingcygwin.htm</A>,
and at other places.
The only packages that are required to build the LSD
executables from sources are those named "gcc-g++" and "make".
Related packages will be installed as well.
</P>

<P>
A double-click on the cygwin icon on your desktop
pops up a DOS-style (background color is black)
command window in which you may type UNIX commands.
This window is the place where you
will type commands to run LSD, once installed.
In Unix terminology, a command window is also named
a "shell window", or even simpler, a "shell".
</P>

<P>
If you want to leave (kill) a command window, just
type Control-D.
</P>

<P>
If you are new to both Cygwin and UNIX, 
the following points may be important for you.
</P>

<H3>Cygwin file system</H3>
<P>
The root of the Cygwin file system is named "/"
and is located at C:\cygwin64\. 
"/" contains all the files of the Cygwin operating system.
</P>

<H3>Home directory</H3>
<P>
Your "home" directory is the place where you put your own
programs and files, like "C:\Users\MyName\Documents" for Windows. 
Before you type in the command window, you get something like MyName@MyPC
(written in green) where MyPC is the computer's name
and MyName is your user's name.
Your home directory is /home/MyName for Cygwin, 
and C:\cygwin64\home\MyName for Windows. 
A synonym of the home directory is "~",
as visible in the command window, written in yellow after MyName@MyPC.
</P>

<P>
Your home directory is a good place for the file
LSD-3.4.11.tar.gz before unpacking it (not right now !) and
proceeding to LSD installation (see below).
</P>

<H3>Command interpreter</H3>
<P>
You will have to modifiy the existing ".bash_profile" file in your home directory.
Type the line "export PATH=.:$PATH",
without the quotes, at the end of the existing ".bash_profile" file.
Kill cygwin the current Cygwin shell window and open a new one,
so that the change in ".bash_profile" becomes effective.
This operation ensures that the current
directory will always be in the list of the directories where executable
files are searched.
This list is provided by the command interpreter parameter named $PATH.
</P>

<H3>Browse files and directories</H3>
<P>
When you open a command window, the current directory is your home directory,
hence the "~" in the title bar that always displays the name of the current directory.
To change the current directory, enter the command cd, followed by the name
of the target directory, followed by the "Enter" key.
If the target directory is located in the current directory, only its name
is required. To change to the parent directory give ".." for its name.
It is also possible to give an "absolute" name that does not refer to the
current directory. The name then starts with a "/" followed by the succession
of sub-directories, separated by slashes.
For example, "cd /home/MyName" sets the current directory to home directory.
The "cd" command without argument returns to the home directory as well.
</P>

<P>
The name of the current directory can always be referred to by the name ".".
The command "ls -a" lists all its contents. Alternatively, you may use
the Windows explorer.
If you do not modify the ".bash_profile" file, you will have to type
"./lsd" instead of "lsd" (the same for outlsd and genpos) to specify
that the program you want to run is located in the current directory.
</P>

<H3>Documentation</H3>
<P>
The Cygwin web site provides many useful tips about the organization
and the use of this operating system. 
</P>

<H1>Installation</H1>
<P>
Open a shell window and change the current directory
to the one that contains LSD-3.4.11.tar.gz, if necessary.
</P>

<P>
1. Unpack<BR>
gunzip LSD-3.4.11.tar.gz<BR>
tar xvf LSD-3.4.11.tar<BR>
</P>

<P>
2. Change directory<BR>
cd LSD-3.4.11<BR>
</P>

<P>
3. Configure and compile<BR>
sh install.sh<BR>
</P>

<P>
4. Test<BR>
make test<BR>
</P>

<P>
You should see the structure of the pinene molecule.
If the test fails after a correct installation (step 3),
it most probably means that the path to the previewer
in the "solve" script is wrong.
You will have to edit it manually to indicate the correct path.
</P>

<H1>Notes</H1>

<H2>The "lsd" command</H2>
<P>
The LSD program itself is invoked by the "lsd" command.
It appears that under some Linux systems lsd is an alias
for "ls -d". Typing lsd gives you then the list of the directories
within the current directory.
You may change this temporarily with "unalias lsd"
or permanently by modifying the shell start-up file that
contains the alias definitions.
</P>

<H2>C Compiler</H2>
<P>
You need a C compiler to produce executable files
from source code written in C.
Under Cygwin and GNU/Linux gcc is the compiler and is included
in the distribution of these operating systems.<BR>
With MacOSX, you need the Apple development tools
to run the gcc compiler.
The Makefile file that is installed in the LSD-3.4.11 folder
allows compilation of the LSD source code with the "make fromSrc" command.
</P>

<H2>Postscript display</H2>
<P>
A Postscript display program is necessary to visualize
the solution structure(s) found by LSD.
The output of LSD may be translated into various graphic formats
by the outlsd program. 
One of these formats can be turned by the "genpos" program into Postscript
intructions, suitable for both visualizing and printing purposes.
</P>

<P>
Under Cygwin, you will use gsview64.exe for Windows, installed
according to the procedure described in the Note to PC/Windows users (see above).
Under MacOSX and Linux, open and evince are the
names of the standard previewers, respectively.
</P>

<H2>M_edit</H2>
<P>
M_edit is a kind of a very minimalist chemical structure editor.
It is there to beautify the ugly drawings outlsd sometimes produces.
It is written in Tcl scripting language and uses the Tk toolkit for GUI creation.
Tcl/Tk is invoked by the "wish" command, standing for "windowing shell".
</P>

<P>
m_edit uses the tk_getOpenFile and tk_getSaveFile
widgets that appeared with Tk version 8.0.
The version of Tcl/Tk you use must be 8.0 or higher.
</P>

<P>
Wish is part of Cygwin and Linux distributions, under the names
cygwish8x.exe and wish8.x, respectively (x = version number).
Under Linux, establish a symbolic link between wish8.x and wish,
e.g. with "ln -s /usr/bin/wish8.x /usr/bin/wish".
Alternatively, you can adapt the m_edit script.
</P>

<P>
For MacOSX, Tcl/Tk is already there.
</P>

<H2>Solve</H2>
<P>
Solve is a small script that successively runs lsd for structure solving,
outlsd for molecule drawing, genpos for Postscript file genereration
and a Postscript previewer for result visualization.
Solve is invoked when you type "make test".
If you get the expected result (the structure of pinene), the installation
is finished and you can start to learn how to write input files for LSD
from the MANUAL_ENG.html document.
</P>

<P>
<I>Copyright(C)2000 CNRS-UMR 7312-Jean-Marc Nuzillard</I>
</P>
</BODY>
</HTML>
